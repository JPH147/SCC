<mat-card class="card">

  <mat-toolbar color="primary">
    <mat-toolbar-row>Observaciones</mat-toolbar-row>
  </mat-toolbar>

  <mat-card-content>

    <mat-horizontal-stepper [linear]="true">
      <!-- Datos del cliente -->
      <mat-step [stepControl]="ClienteForm">

        <form [formGroup]="ClienteForm">

          <ng-template matStepLabel>Datos del cliente</ng-template>

          <mat-grid-list cols="4" rowHeight="70px">

            <mat-grid-tile colspan="2">
              <mat-form-field class="columnas-2">
                <input placeholder="Cliente" matInput formControlName="cliente">
              </mat-form-field>
            </mat-grid-tile>
    
            <mat-grid-tile>
              <mat-form-field class="columnas-1">
                <input matInput placeholder="Cargo" formControlName="cargo">
              </mat-form-field>
            </mat-grid-tile>
    
            <mat-grid-tile>
              <mat-form-field class="columnas-1">
                <input matInput placeholder="Centro de Trabajo" formControlName="trabajo">
              </mat-form-field>
            </mat-grid-tile>
    
            <mat-grid-tile colspan="2">
              <mat-form-field class="columnas-2">
                <input matInput placeholder="Domicilio" formControlName="domicilio">
              </mat-form-field>
            </mat-grid-tile>
    
            <mat-grid-tile>
              <mat-form-field class="columnas-1">
                <input matInput placeholder="Teléfono" formControlName="telefono">
              </mat-form-field>
            </mat-grid-tile>
    
          </mat-grid-list>

          <button mat-button matStepperNext [disabled]="ClienteForm.invalid" >Siguiente</button>

        </form>

      </mat-step>

      <!-- Datos del la venta -->
      <mat-step [stepControl]="VentaForm">
        <form [formGroup]="VentaForm">
          <ng-template matStepLabel>Datos de la venta</ng-template>
          <mat-grid-list cols="4" rowHeight="70px">

            <mat-grid-tile>
              <mat-form-field class="columnas-1">
                <input matInput [matDatepicker]="picker" placeholder="Fecha de venta" formControlName="fecha">
                <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                <mat-datepicker #picker [disabled]="idventa"></mat-datepicker>
              </mat-form-field>
            </mat-grid-tile>
            
            <mat-grid-tile *ngIf="!idventa">
              <mat-form-field class="columnas-1">
                <mat-select placeholder='Contrato' formControlName="contrato">
                  <mat-option *ngFor="let contrato of LstContrato" [value] = "contrato.id"> {{contrato.serie}}-{{contrato.numero}} </mat-option>
                </mat-select>
              </mat-form-field>
            </mat-grid-tile>

            <mat-grid-tile colspan="4">
              <mat-form-field class="columnas-2">
                <input matInput placeholder="Lugar de venta" formControlName="lugar">
              </mat-form-field>
            </mat-grid-tile>
            
            <mat-grid-tile colspan="4">
              <mat-form-field class="columnas-4">
                <input matInput placeholder="Observaciones" formControlName="observaciones">
              </mat-form-field>
            </mat-grid-tile>
          </mat-grid-list>

          <button mat-button matStepperPrevious>Anterior</button>
          <button mat-button matStepperNext [disabled]="VentaForm.disabled">Siguiente</button>

        </form>
      </mat-step>

      <!-- Datos del los productos -->
      <mat-step [stepControl]="ProductoForm">
        <form [formGroup]="ProductoForm">
          <ng-template matStepLabel>Datos de los productos</ng-template>
          <mat-grid-list cols="4" rowHeight="70px">

            <mat-grid-tile>
              <mat-form-field class="columnas-1">
                <mat-select formControlName="id_producto">
                  <mat-option value="1">Producto 1</mat-option>
                </mat-select>
              </mat-form-field>
            </mat-grid-tile>
            
            <mat-grid-tile>
              <mat-form-field class="columnas-1">
                <mat-select formControlName="id_serie">
                  <mat-option value="1">Serie 1</mat-option>
                </mat-select>
              </mat-form-field>
            </mat-grid-tile>
        
            <mat-grid-tile>
              <mat-form-field class="columnas-1">
                <input matInput placeholder="Precio" formControlName="observaciones">
              </mat-form-field>
            </mat-grid-tile>

            <mat-grid-tile>
              <button mat-raised-button color="primary">Agregar</button>
            </mat-grid-tile>

          </mat-grid-list>

          <button mat-button matStepperPrevious>Anterior</button>
          <button mat-button matStepperNext [disabled]="ProductoForm.disabled">Siguiente</button>
  
        </form>
      </mat-step>

      <!-- Datos del documento -->
      <mat-step [stepControl]="DocumentoForm">
        <form [formGroup]="DocumentoForm">
          <ng-template matStepLabel>Datos del documento</ng-template>
          <mat-grid-list cols="4" rowHeight="70px">

            <mat-grid-tile>
              <mat-form-field class="columnas-1">
                <input matInput [matDatepicker]="InputFechaPago" placeholder="Inicio de pagos" [min]="VentaForm.value.fecha" formControlName="fechapago" (dateChange)="CrearCronograma()">
                <mat-datepicker-toggle matSuffix [for]="InputFechaPago"></mat-datepicker-toggle>
                <mat-datepicker #InputFechaPago [disabled]=false></mat-datepicker>
              </mat-form-field>
            </mat-grid-tile>
        
            <mat-grid-tile>
              <mat-form-field class="columnas-1">
                <mat-select placeholder='Tipo de pago' formControlName="tipopago" (selectionChange)="TipoPagoSeleccionado()">
                  <mat-option *ngFor="let tipopago of LstTipoPago" [value] = "tipopago.id"> {{tipopago.nombre}} </mat-option>
                </mat-select>
              </mat-form-field>
            </mat-grid-tile>
        
            <mat-grid-tile>
              <mat-form-field class="columnas-1">
                <input matInput placeholder="Cuota inicial" formControlName="inicial" #InputInicial>
                <mat-error>Solo debe ingresar valores númericos</mat-error>
                <span matPrefix>S/ &nbsp;</span>
                <mat-hint *ngIf="monto_inicial_canje">Se dejó a cuenta S/. {{monto_inicial_canje}}</mat-hint>
              </mat-form-field>
            </mat-grid-tile>
        
            <mat-grid-tile>
              <mat-form-field class="columnas-1">
                <input matInput placeholder="N° de cuotas" maxlength=3 formControlName="cuotas" #InputCuota>
                <mat-error>Solo debe ingresar valores númericos</mat-error>
              </mat-form-field>
            </mat-grid-tile>
        
            <mat-grid-tile>
              <mat-form-field class="columnas-1">
                <input matInput placeholder="Monto total" formControlName="montototal" readonly>
                <span matPrefix>S/ &nbsp;</span>
              </mat-form-field>
            </mat-grid-tile>
          </mat-grid-list>

          <button mat-button matStepperPrevious>Back</button>
          <button mat-button matStepperNext [disabled]="DocumentoForm.invalid">Next</button>

        </form>
      </mat-step>

    </mat-horizontal-stepper>

  </mat-card-content>

</mat-card>
